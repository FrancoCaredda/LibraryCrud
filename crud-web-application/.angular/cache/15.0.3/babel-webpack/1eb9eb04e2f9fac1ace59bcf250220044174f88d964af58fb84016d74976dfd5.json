{"ast":null,"code":"import { Book } from 'src/app/core/model/book';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/core/services/data-service.service\";\nimport * as i2 from \"@angular/common\";\nfunction GetPageComponent_tr_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const model_r1 = ctx.$implicit;\n    const i_r2 = ctx.index;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i_r2 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(model_r1.getTitle());\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(model_r1.getCount());\n  }\n}\n//TODO: Implement \nexport class GetPageComponent {\n  constructor(service) {\n    this.service = service;\n    this.data = [];\n    this.bookName = \"\";\n  }\n  ngOnInit() {\n    this.service.getData().subscribe(data => Object.keys(data).map(key => data[key]).map(book => this.data.push(new Book(book.title, book.count))), error => alert(\"Can\\'t read books from server!\"));\n  }\n  updateBookCount(delta) {\n    let book = this.data.find(b => {\n      return b.getTitle() == this.bookName;\n    });\n    if (book?.getCount() != 0 && book != null) {\n      let count = parseInt(book.getCount().toString()) + delta;\n      this.service.updateData(book.getTitle(), new Book(book.getTitle(), count)).subscribe(e => alert(\"Success\"), error => alert(\"Can\\'t update the data!\"));\n    } else {\n      alert(\"This book does not exist in the table\");\n    }\n  }\n  getBook() {\n    this.updateBookCount(-1);\n  }\n  returnBook() {\n    this.updateBookCount(1);\n  }\n}\nGetPageComponent.ɵfac = function GetPageComponent_Factory(t) {\n  return new (t || GetPageComponent)(i0.ɵɵdirectiveInject(i1.DataService));\n};\nGetPageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: GetPageComponent,\n  selectors: [[\"app-get-page\"]],\n  decls: 25,\n  vars: 2,\n  consts: [[2, \"margin-top\", \"10px\"], [1, \"table\", 2, \"text-align\", \"center\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [1, \"mb-3\"], [\"type\", \"text\", \"placeholder\", \"Name\", 1, \"form-control\", 3, \"value\"], [1, \"btn\", \"btn-primary\", 2, \"margin-right\", \"10px\", 3, \"click\"], [1, \"btn\", \"btn-primary\", 3, \"click\"]],\n  template: function GetPageComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h3\", 0);\n      i0.ɵɵtext(1, \"List of the data\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(2, \"hr\");\n      i0.ɵɵelementStart(3, \"table\", 1)(4, \"thead\")(5, \"tr\")(6, \"th\", 2);\n      i0.ɵɵtext(7, \"#\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"th\", 2);\n      i0.ɵɵtext(9, \"Title\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"th\", 2);\n      i0.ɵɵtext(11, \"Count\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(12, \"tbody\");\n      i0.ɵɵtemplate(13, GetPageComponent_tr_13_Template, 7, 3, \"tr\", 3);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(14, \"hr\");\n      i0.ɵɵelementStart(15, \"h3\");\n      i0.ɵɵtext(16, \"Get/Return book\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"div\")(18, \"div\", 4);\n      i0.ɵɵelement(19, \"input\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"div\", 4)(21, \"button\", 6);\n      i0.ɵɵlistener(\"click\", function GetPageComponent_Template_button_click_21_listener() {\n        return ctx.getBook;\n      });\n      i0.ɵɵtext(22, \"Get\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"button\", 7);\n      i0.ɵɵlistener(\"click\", function GetPageComponent_Template_button_click_23_listener() {\n        return ctx.returnBook;\n      });\n      i0.ɵɵtext(24, \"Return\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(13);\n      i0.ɵɵproperty(\"ngForOf\", ctx.data);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"value\", ctx.bookName);\n    }\n  },\n  dependencies: [i2.NgForOf],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"AACA,SAASA,IAAI,QAAQ,yBAAyB;;;;;;ICUtCC,0BAA2C;IACnCA,YAAS;IAAAA,iBAAK;IAClBA,0BAAI;IAAAA,YAAoB;IAAAA,iBAAK;IAC7BA,0BAAI;IAAAA,YAAoB;IAAAA,iBAAK;;;;;IAFzBA,eAAS;IAATA,8BAAS;IACTA,eAAoB;IAApBA,yCAAoB;IACpBA,eAAoB;IAApBA,yCAAoB;;;ADVpC;AAMA,OAAM,MAAOC,gBAAgB;EAI3BC,YAAoBC,OAAoB;IAApB,YAAO,GAAPA,OAAO;IAHpB,SAAI,GAAgB,EAAE;IACtB,aAAQ,GAAW,EAAE;EAEe;EAE3CC,QAAQ;IACN,IAAI,CAACD,OAAO,CAACE,OAAO,EAAE,CAACC,SAAS,CAC7BC,IAAS,IAAKC,MAAM,CAACC,IAAI,CAACF,IAAI,CAAC,CAACG,GAAG,CAAEC,GAAG,IAAKJ,IAAI,CAACI,GAAG,CAAC,CAAC,CAACD,GAAG,CAAEE,IAAI,IAAK,IAAI,CAACL,IAAI,CAACM,IAAI,CAAC,IAAId,IAAI,CAACa,IAAI,CAACE,KAAK,EAAEF,IAAI,CAACG,KAAK,CAAC,CAAC,CAAC,EACvHC,KAAK,IAAKC,KAAK,CAAC,gCAAgC,CAAC,CACnD;EACH;EAEQC,eAAe,CAACC,KAAU;IAChC,IAAIP,IAAI,GAAG,IAAI,CAACL,IAAI,CAACa,IAAI,CAAEC,CAAC,IAAI;MAAG,OAAOA,CAAC,CAACC,QAAQ,EAAE,IAAI,IAAI,CAACC,QAAQ;IAAC,CAAC,CAAC;IAC1E,IAAIX,IAAI,EAAEY,QAAQ,EAAE,IAAI,CAAC,IAAIZ,IAAI,IAAI,IAAI,EAAE;MACzC,IAAIG,KAAK,GAAGU,QAAQ,CAACb,IAAI,CAACY,QAAQ,EAAE,CAACE,QAAQ,EAAE,CAAC,GAAGP,KAAK;MACxD,IAAI,CAAChB,OAAO,CAACwB,UAAU,CAACf,IAAI,CAACU,QAAQ,EAAE,EAAE,IAAIvB,IAAI,CAACa,IAAI,CAACU,QAAQ,EAAE,EAAEP,KAAK,CAAC,CAAC,CAACT,SAAS,CACjFsB,CAAC,IAAKX,KAAK,CAAC,SAAS,CAAC,EACtBD,KAAK,IAAKC,KAAK,CAAC,yBAAyB,CAAC,CAC5C;KACF,MAAM;MACLA,KAAK,CAAC,uCAAuC,CAAC;;EAElD;EAEOY,OAAO;IACZ,IAAI,CAACX,eAAe,CAAC,CAAC,CAAC,CAAC;EAC1B;EAEOY,UAAU;IACf,IAAI,CAACZ,eAAe,CAAC,CAAC,CAAC;EACzB;;AAhCWjB,gBAAgB;mBAAhBA,gBAAgB;AAAA;AAAhBA,gBAAgB;QAAhBA,gBAAgB;EAAA8B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCV7BnC,6BAA8B;MAAAA,gCAAgB;MAAAA,iBAAK;MACnDA,qBAAI;MACJA,gCAAiD;MAGzBA,iBAAC;MAAAA,iBAAK;MACtBA,6BAAgB;MAAAA,qBAAK;MAAAA,iBAAK;MAC1BA,8BAAgB;MAAAA,sBAAK;MAAAA,iBAAK;MAG9BA,8BAAO;MACHA,iEAIK;MACTA,iBAAQ;MAEZA,sBAAI;MACJA,2BAAI;MAAAA,gCAAe;MAAAA,iBAAK;MACxBA,4BAAK;MAEDA,4BAA8E;MAChFA,iBAAM;MACNA,+BAAkB;MAC4CA;QAAA;MAAA,EAAiB;MAACA,oBAAG;MAAAA,iBAAS;MAC1FA,kCAAqD;MAArBA;QAAA;MAAA,EAAoB;MAACA,uBAAM;MAAAA,iBAAS;;;MAf1CA,gBAAS;MAATA,kCAAS;MAWwBA,eAAkB;MAAlBA,oCAAkB","names":["Book","i0","GetPageComponent","constructor","service","ngOnInit","getData","subscribe","data","Object","keys","map","key","book","push","title","count","error","alert","updateBookCount","delta","find","b","getTitle","bookName","getCount","parseInt","toString","updateData","e","getBook","returnBook","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["D:\\Projects\\CRUD-template\\crud-web-application\\src\\app\\components\\get-page\\get-page.component.ts","D:\\Projects\\CRUD-template\\crud-web-application\\src\\app\\components\\get-page\\get-page.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Book } from 'src/app/core/model/book';\nimport { DataService } from 'src/app/core/services/data-service.service';\n\n//TODO: Implement \n@Component({\n  selector: 'app-get-page',\n  templateUrl: './get-page.component.html',\n  styleUrls: ['./get-page.component.css']\n})\nexport class GetPageComponent implements OnInit {\n  public data: Array<Book> = [];\n  public bookName: string = \"\";\n\n  constructor(private service: DataService) {}\n\n  ngOnInit(): void {\n    this.service.getData().subscribe(\n      (data: any) => Object.keys(data).map((key) => data[key]).map((book) => this.data.push(new Book(book.title, book.count))),\n      (error) => alert(\"Can\\'t read books from server!\")\n    );  \n  }\n\n  private updateBookCount(delta: any): void {\n    let book = this.data.find((b) => { return b.getTitle() == this.bookName });\n    if (book?.getCount() != 0 && book != null) {\n      let count = parseInt(book.getCount().toString()) + delta;\n      this.service.updateData(book.getTitle(), new Book(book.getTitle(), count)).subscribe(\n        (e) => alert(\"Success\"),\n        (error) => alert(\"Can\\'t update the data!\")\n      );\n    } else {\n      alert(\"This book does not exist in the table\");\n    }\n  }\n\n  public getBook(): void {\n    this.updateBookCount(-1);\n  }\n\n  public returnBook(): void {\n    this.updateBookCount(1);\n  }\n}\n","<h3 style=\"margin-top: 10px;\">List of the data</h3>\n<hr>\n<table class=\"table\" style=\"text-align: center;\">\n    <thead>\n      <tr>\n        <th scope=\"col\">#</th>\n        <th scope=\"col\">Title</th>\n        <th scope=\"col\">Count</th>\n      </tr>\n    </thead>\n    <tbody>\n        <tr *ngFor=\"let model of data; index as i\">\n            <td>{{i + 1}}</td>\n            <td>{{model.getTitle()}}</td>\n            <td>{{model.getCount()}}</td>\n        </tr>\n    </tbody>\n</table>\n<hr>\n<h3>Get/Return book</h3>\n<div>\n  <div class=\"mb-3\">\n    <input type=\"text\" class=\"form-control\" placeholder=\"Name\" [value]=\"bookName\">\n  </div>\n  <div class=\"mb-3\">\n    <button class=\"btn btn-primary\" style=\"margin-right: 10px;\" (click)=\"getBook\">Get</button>\n    <button class=\"btn btn-primary\" (click)=\"returnBook\">Return</button>\n  </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}